---
- name: Workflow Validation Playbook
  hosts: localhost
  gather_facts: false
  
  vars:
    # This variable could be passed in via AAP "Extra Vars"
    required_service_status: "down"

  tasks:
    # Standard task that performs a check
    - name: Print the current status for logging
      ansible.builtin.debug:
        msg: "Checking the status of the required service..."

    # This is the "Fail" logic. 
    # If the condition is met, the job returns a non-zero exit code.
    - name: Trigger Workflow Failure Path
      ansible.builtin.fail:
        msg: "Condition met: The service is {{ content }}. Failing job to trigger rollback workflow."
      when: content == "fail" # Change this logic as needed

    # This task will NEVER run if the 'fail' task above is triggered
    - name: Success Path Task
      ansible.builtin.debug:
        msg: "Everything looks good! Continuing on Success path."
